<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input type="text" value="123467" id="num"><input type="button" value="Calcular" id="calc">
    <div id="dig"></div>

    <script>
        const but = document.getElementById('calc');
        const num = document.getElementById('num');
        const dig = document.getElementById('dig');

        but.addEventListener('click', (e) => {
            dig.innerHTML = calculate(num.value);
        })

        function calculate(str) {
            const len = str.length;
            if (len < 6) return 'Ha ingresado ' + len + ' digitos, debe ingresar al menos 6.'; //Less digits than required
            if (len > 7) return 'Debe ingresar como máximo siete dígitos, ha ingresado ' + len + '.'; //More digits than required
            if (Number.isNaN(Number(str))) return 'El valor ingresado no es un número válido.'; //Not a number

            let num = str.split('');
            let coe = [8, 1, 2, 3, 4, 7, 6]; // Coefficients for calculation
            if (len == 6) coe.shift(); // old identification numbers have 6 digits, so remove the first coefficient
            console.clear(); //debug
            num.forEach((n, index, self) => {
                console.group('Current value: ' + n, ' | Coefficient: ' + coe[index], ' | Index: ' + index, ' | num array: ' + self); //debug
                self[index] = n * coe[index];
                console.log('New num array: ' + self); //debug
                console.groupEnd(); //debug
            });
            num = num.reduce((acc, curr) => acc + curr, 0);
            return 'Dígito verificador: ' + num % 10;
        }
    </script>
</body>

</html>